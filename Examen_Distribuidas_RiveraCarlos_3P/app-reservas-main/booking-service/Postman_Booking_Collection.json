{
  "info": {
    "_postman_id": "booking-service-collection",
    "name": "Booking Service GraphQL",
    "description": "Colección para probar las mutations y queries del servicio de reservas",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Crear Reserva",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer test-token-user-123"
          }
        ],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "mutation {\n  createBooking(fecha: \"2026-03-15T10:00:00\" servicio: \"Habitación Doble Lujo\") {\n    id\n    userId\n    fecha\n    servicio\n    estado\n    fechaFormateada\n  }\n}"
          }
        },
        "url": {
          "raw": "{{base_url}}/graphql",
          "host": ["{{base_url}}"],
          "path": ["graphql"]
        },
        "description": "Crear una nueva reserva para la fecha especificada"
      },
      "response": []
    },
    {
      "name": "2. Mis Reservas",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer test-token-user-123"
          }
        ],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "query {\n  myBookings {\n    id\n    userId\n    fecha\n    servicio\n    estado\n    canceladaEn\n    fechaFormateada\n  }\n}"
          }
        },
        "url": {
          "raw": "{{base_url}}/graphql",
          "host": ["{{base_url}}"],
          "path": ["graphql"]
        },
        "description": "Listar todas las reservas del usuario autenticado"
      },
      "response": []
    },
    {
      "name": "3. Próximas Reservas (Máximo 5)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer test-token-user-123"
          }
        ],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "query {\n  nextBookings {\n    id\n    userId\n    fecha\n    servicio\n    estado\n    fechaFormateada\n  }\n}"
          }
        },
        "url": {
          "raw": "{{base_url}}/graphql",
          "host": ["{{base_url}}"],
          "path": ["graphql"]
        },
        "description": "Listar las próximas 5 reservas activas del usuario (fechas >= hoy)"
      },
      "response": []
    },
    {
      "name": "4. Cancelar Reserva",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer test-token-user-123"
          }
        ],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "mutation {\n  cancelBooking(id: \"1\") {\n    id\n    userId\n    fecha\n    servicio\n    estado\n    canceladaEn\n    fechaFormateada\n  }\n}"
          }
        },
        "url": {
          "raw": "{{base_url}}/graphql",
          "host": ["{{base_url}}"],
          "path": ["graphql"]
        },
        "description": "Cancelar una reserva existente. Nota: Reemplaza el id '1' con un ID real de tu BD"
      },
      "response": []
    },
    {
      "name": "5. Eliminar Reserva",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer test-token-user-123"
          }
        ],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "mutation {\n  deleteBooking(id: \"1\")\n}"
          }
        },
        "url": {
          "raw": "{{base_url}}/graphql",
          "host": ["{{base_url}}"],
          "path": ["graphql"]
        },
        "description": "Eliminar permanentemente una reserva. Nota: Reemplaza el id '1' con un ID real"
      },
      "response": []
    },
    {
      "name": "6. Crear 3 Reservas (Flow de Prueba)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer test-token-user-123"
          }
        ],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "mutation {\n  reserva1: createBooking(fecha: \"2026-04-01T08:00:00\" servicio: \"Suite Presidencial\") {\n    id\n    fecha\n    servicio\n    estado\n  }\n  reserva2: createBooking(fecha: \"2026-05-10T14:00:00\" servicio: \"Habitación Estándar\") {\n    id\n    fecha\n    servicio\n    estado\n  }\n  reserva3: createBooking(fecha: \"2026-06-20T10:30:00\" servicio: \"Penthouse Lujo\") {\n    id\n    fecha\n    servicio\n    estado\n  }\n}"
          }
        },
        "url": {
          "raw": "{{base_url}}/graphql",
          "host": ["{{base_url}}"],
          "path": ["graphql"]
        },
        "description": "Crear 3 reservas en una sola request (multimutación) para probar transacciones"
      },
      "response": []
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5002",
      "type": "string"
    },
    {
      "key": "token",
      "value": "test-token-user-123",
      "type": "string"
    },
    {
      "key": "booking_id",
      "value": "1",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  }
}
